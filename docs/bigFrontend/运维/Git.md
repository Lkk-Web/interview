---
order: 2
---

# Git

è¿™é‡Œæƒ³å•ç‹¬å¼€ä¸€æ  Git æ–‡ç« ï¼Œæ˜¯å› ä¸º git ç»å¸¸ç”¨åˆ°ï¼Œä¹Ÿæ˜¯ä¼´éšæˆ‘ä»¬ç¨‹åºç”Ÿæ¶¯çš„å¿…ç»ä¹‹è·¯ã€‚

```git
*git ä¸‰å¤§æŒ‡ä»¤

git add .
git commit -m 'guide: message'
git push
```

## ä¸€ã€ä»“åº“/ä»£ç ç®¡ç†

### 1ã€ç¯å¢ƒé…ç½®

ä¸‹è½½ gitï¼š[Git å®˜ç½‘ä¸‹è½½](git-scm.com/)

æŸ¥çœ‹ç‰ˆæœ¬ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ : git -v

cd ï½/.ssh å¦‚æœæç¤º cd: no such file or directory: ï½/.ssh å°±è¯´æ˜æ˜¯æ²¡æœ‰é…ç½®è¿‡ï¼Œæ˜¯æ­£å¸¸çš„ï¼Œç»§ç»­æ“ä½œå³å¯

> ä¹Ÿå¯é€šè¿‡ `git config -list` æŸ¥çœ‹é…ç½®

git config --global user.name "ä½ çš„è´¦å·å"

git config --global user.email "ä½ çš„ git é‚®ç®±"

ssh-keygen -t rsa -C "ä½ çš„ git é‚®ç®±" ç”Ÿæˆå…ç™»é™†å¯†é’¥

open ~/.ssh å°† id_rsa.pub æ–‡ä»¶å†…éƒ¨çš„æ–‡æœ¬æ·»åŠ åˆ° git ä»£ç æ‰˜ç®¡å¹³å°è¿›è¡Œ ssh key æ·»åŠ 

### 2ã€ä»“åº“ç®¡ç†

#### Fork

fork åªèƒ½å¯¹ä»£ç ä»“è¿›è¡Œæ“ä½œï¼Œä¸” fork ä¸å±äº git çš„å‘½ä»¤ï¼Œé€šå¸¸ç”¨äºä»£ç ä»“æ‰˜ç®¡å¹³å°çš„ä¸€ç§â€œæ“ä½œâ€.

Fork å‡ºçš„ä»“åº“åŒ…å«äº†åŸæ¥çš„ä»“åº“ï¼ˆå³ upstream repositoryï¼Œä¸Šæ¸¸ä»“åº“ï¼‰æ‰€æœ‰å†…å®¹ï¼Œå¦‚åˆ†æ”¯ã€Tagã€æäº¤å¦‚æœæƒ³å°†ä½ çš„ä¿®æ”¹åˆå¹¶åˆ°åŸé¡¹ç›®ä¸­æ—¶ï¼Œå¯ä»¥é€šè¿‡çš„ Pull Request æŠŠä½ çš„æäº¤è´¡çŒ®å›åŸä»“åº“ã€‚

### 3ã€ä»£ç ç®¡ç† & git å¸¸ç”¨å‘½ä»¤

**åˆå§‹åŒ–ä»“åº“**ï¼š

    git init

**æ‹‰å–ä»“åº“**ï¼š

    git clone [gitUrl]

**æ‹‰å–ä»£ç (fetch)**ï¼š

    git fetch <è¿œç¨‹ä¸»æœºå> <è¿œç¨‹åˆ†æ”¯å>:<æœ¬åœ°åˆ†æ”¯å>

ä½¿ç”¨ git fetch æ›´æ–°ä»£ç ï¼Œæœ¬åœ°çš„åº“ä¸­ master çš„ commitID ä¸å˜,ä½†æ˜¯ä¸ git ä¸Šé¢å…³è”çš„é‚£ä¸ª orign/master çš„ commit ID å‘ç”Ÿæ”¹å˜

è¿™æ—¶å€™æˆ‘ä»¬æœ¬åœ°ç›¸å½“äºå­˜å‚¨äº†ä¸¤ä¸ªä»£ç çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬è¿˜è¦é€šè¿‡ merge å»åˆå¹¶è¿™ä¸¤ä¸ªä¸åŒçš„ä»£ç ç‰ˆæœ¬

ä¹Ÿå°±æ˜¯ fetch çš„æ—¶å€™æœ¬åœ°çš„ master æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯ä¸è¿œç¨‹ä»“å…³è”çš„é‚£ä¸ªç‰ˆæœ¬å·è¢«æ›´æ–°äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨æœ¬åœ° merge åˆå¹¶è¿™ä¸¤ä¸ªç‰ˆæœ¬å·çš„ä»£ç 

**æ‹‰å–ä»£ç (pull)**ï¼š

    git pull <è¿œç¨‹ä¸»æœºå> <è¿œç¨‹åˆ†æ”¯å>:<æœ¬åœ°åˆ†æ”¯å>

git pull å‘½ä»¤ç”¨äºä»è¿œç¨‹è·å–ä»£ç å¹¶åˆå¹¶æœ¬åœ°(æŸåˆ†æ”¯,é»˜è®¤ä¸ºæœ¬åˆ†æ”¯)ã€‚ç›¸å½“äº git fetch + git merge FETCH_HEAD

**æš‚å­˜ä»£ç **ï¼š

    git add [filePath]
    git add . # æ·»åŠ æ‰€æœ‰å·¥ä½œåŒºçš„æ–‡ä»¶åˆ°æš‚å­˜åŒº

**review ä»£ç **ï¼š

    git diff # æŸ¥çœ‹å½“å‰ä»£ç  addåï¼Œä¼š add å“ªäº›å†…å®¹
    git diff --staged # æŸ¥çœ‹ç°åœ¨ commit æäº¤åï¼Œä¼šæäº¤å“ªäº›å†…å®¹

**æäº¤ä»£ç **ï¼š

```bash
git commmit -m [message]
git commmit --amend --message=[message] --author=[author]   # ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡commitçš„message æˆ– author
# ä¿®æ”¹å€’æ•°ç¬¬næ¬¡commit
git rebase -i HEAD~n   #ä½¿ç”¨rebaseå˜åŸº
# æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå°†pickæ”¹ä¸ºe|editï¼Œç„¶åESCé€€å‡ºç¼–è¾‘ï¼Œ:wqä¿å­˜ã€‚
git commmit --amend --message=[message] --author=[author]
git rebase --continue
```

**æŸ¥çœ‹çŠ¶æ€**ï¼š

    git status  # æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€

**ä¸Šä¼ ä»£ç **ï¼š

    git push <è¿œç¨‹ä¸»æœºå> <æœ¬åœ°åˆ†æ”¯å>:<è¿œç¨‹åˆ†æ”¯å>

#### commit Message è§„èŒƒ

ç›®å‰å›¢é˜Ÿè§„èŒƒä½¿ç”¨è¾ƒå¤šçš„æ˜¯ [Angular å›¢é˜Ÿçš„è§„èŒƒ](https:# github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines),å¦‚ä¸‹ï¼š

```xml
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

- feat: æ–°ç‰¹æ€§
- fix: ä¿®æ”¹é—®é¢˜
- refactor: ä»£ç é‡æ„
- docs: æ–‡æ¡£ä¿®æ”¹
- style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹
- test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
- chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†.

  -----------------åˆ†å‰²çº¿-----------------

- type: commit çš„ç±»å‹
- scope: commit å½±å“çš„èŒƒå›´, æ¯”å¦‚: route, component, utils, build...
- subject: commit çš„æ¦‚è¿°, å»ºè®®ç¬¦åˆ 50/72 formatting
- body: commit å…·ä½“ä¿®æ”¹å†…å®¹, å¯ä»¥åˆ†ä¸ºå¤šè¡Œ, å»ºè®®ç¬¦åˆ 50/72 formatting
- footer: ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥.

#### é¡¹ç›®é…ç½® commitlint

1ã€é¡¹ç›®ä¾èµ–å®‰è£…

```javascript
npm install husky commitlint/config-conventional commitlint/cli --save
npx husky install //å®‰è£…nodeç¯å¢ƒï¼Œä¸€å®šè¦è£…ï¼
```

2ã€package.json é…ç½®

```json
 {
    "lint": "dumi g tmp && npm run lint:js && npm run lint:prettier",
    "lint-staged:js": "eslint --fix --format=pretty",
    "lint:js": "eslint --cache --ext .js,.jsx,.ts,.tsx --format=pretty",
    "lint:prettier": "prettier --check \"src/**/*\" --end-of-line auto"
 }
  "husky": {
    "hooks": {
      "pre-commit": "npm run lint-staged"
    }
  },
  "gitHooks": {
    "pre-commit": "lint-staged",
    "commit-msg": "commitlint -e $HUSKY_GIT_PARAMS"
  },
  "lint-staged": {
    "**/*.{js,jsx,tsx,ts,less,md,json}": [
      "prettier --write"
    ]
  },
```

3ã€æ·»åŠ  commitlint.config.js æ–‡ä»¶

```javascript
module.exports = {
  extends: ['@commitlint/config-conventional'],
};
```

4ã€æ·»åŠ  eslintrc.js æ–‡ä»¶

```javascript
module.exports = {
  extends: [require.resolve('@umijs/fabric/dist/eslint')],
  globals: {
    ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION: true,
    page: true,
    REACT_APP_ENV: true,
  },
  rules: {
    'no-restricted-syntax': 0,
    'no-shadow': 0,
    '@typescript-eslint/no-shadow': 0,
    'no-underscore-dangle': 0,
    'no-plusplus': 0,
    'no-param-reassign': 0,
    '@typescript-eslint/no-unused-expressions': 0,
    'consistent-return': 0,
    'no-nested-ternary': 0,
  },
};
```

#### ä¸Šä¼ å¿½ç•¥ .gitignore æ–‡ä»¶

è¯¥æ–‡ä»¶æœ‰ç”¨æ¥å±è”½æ–‡ä»¶ä¸Šä¼  git çš„ä½œç”¨ï¼Œä¸€èˆ¬æ”¾åœ¨æ ¹ç›®å½•ã€‚ç”¨æ³•æ˜¯ç¼–è¾‘æ”¹æ–‡ä»¶ï¼Œä»¥ç›¸å¯¹è·¯å¾„æ·»åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚

#### .gitkeep æ–‡ä»¶

è¯¥æ–‡ä»¶ä½¿ git æ— æ³•è¿½è¸ªä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ï¼Œå½“ç”¨æˆ·éœ€è¦è¿½è¸ª(track)ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œå¤§å®¶ä¼šæŠŠä¸€ä¸ªç§°ä¸º.gitkeep çš„æ–‡ä»¶æ”¾åœ¨è¿™äº›æ–‡ä»¶å¤¹é‡Œã€‚

å°±ä¸ªäººè€Œè¨€ï¼Œä¸€èˆ¬éœ€è¦.gitkeep åœ°æ–¹ï¼Œæ˜¯å¸Œæœ›å®Œæˆä»¥ä¸‹åŠŸèƒ½:

- ä½¿ git å¿½ç•¥ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶ä¿ç•™è¯¥æ–‡ä»¶å¤¹

## äºŒã€åˆ†æ”¯ç®¡ç†

### 2.1 git branch

```bash
git branch # æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯
git branch -r # æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰åˆ†æ”¯
git branch -a # æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯
git branch <æ–°åˆ†æ”¯å> # åŸºäºå½“å‰åˆ†æ”¯ï¼Œæ–°å»ºä¸€ä¸ªåˆ†æ”¯
git branch -D <åˆ†æ”¯å> # åˆ é™¤æœ¬åœ°æŸä¸ªåˆ†æ”¯
git branch <æ–°åˆ†æ”¯åç§°> <æäº¤ID> # ä»æäº¤å†å²æ¢å¤æŸä¸ªåˆ æ‰çš„æŸä¸ªåˆ†æ”¯
git branch -m <åŸåˆ†æ”¯å> <æ–°åˆ†æ”¯å> # åˆ†æ”¯æ›´å
```

- æœ¬åœ°åˆ†æ”¯æ¨åˆ°è¿œç¨‹åˆ†æ”¯

```sh
git push origin my_branch
```

### 2.2 git checkout

- åˆ†æ”¯æ“ä½œ

```bash
git checkout <åˆ†æ”¯å> # åˆ‡æ¢åˆ°æœ¬åœ°æŸä¸ªåˆ†æ”¯
git checkout <è¿œç¨‹åº“å>/<åˆ†æ”¯å> # åˆ‡æ¢åˆ°ä»“åº“æŸä¸ªåˆ†æ”¯
git checkout -b <æ–°åˆ†æ”¯å> # æŠŠåŸºäºå½“å‰åˆ†æ”¯æ–°å»ºåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢ä¸ºè¿™ä¸ªåˆ†æ”¯
git checkout --orphan <æ–°åˆ†æ”¯å> # æ–°å»ºä¸€ä¸ªç©ºåˆ†æ”¯ï¼ˆä¼šä¿ç•™ä¹‹å‰åˆ†æ”¯çš„æ‰€æœ‰æ–‡ä»¶ï¼‰
```

- æœ¬åœ°æ’¤é”€æ“ä½œ

```bash
git checkout [file] # æ”¾å¼ƒå·¥ä½œåŒºçš„æŸä¸ªæ–‡ä»¶ä¿®æ”¹
git checkout . # æ”¾å¼ƒå·¥ä½œåŒºçš„æ‰€æœ‰ä¿®æ”¹
git checkout [commit] [file] # æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº
```

### 2.3 git remote

```bash
git remote -v # æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“
git remote show [remote] # æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯
git remote add [shortname] [url]  # æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“åˆ°æœ¬åœ°ï¼Œshortname ä¸ºæœ¬åœ°çš„ç‰ˆæœ¬åº“åç§°---å¯ä»¥ç†è§£ä¸ºå»ºç«‹è”ç³»
git remote rm name  # åˆ é™¤è¿œç¨‹ä»“åº“
git remote rename old_name new_name  #ä¿®æ”¹ä»“åº“å
git remote set-url origin <url>  # ä¿®æ”¹æœ¬åœ°ä»£ç å…³è”çš„è¿œç¨‹åœ°å€
```

- æŸ¥çœ‹ä¸Šæ¸¸åˆ†æ”¯

å¯ä»¥é€šè¿‡ git status ã€ git checkout <åˆ†æ”¯>ã€git branch -vv å‘½ä»¤æŸ¥çœ‹

- è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯

æ–¹å¼ä¸€ï¼ˆé€‚ç”¨è¿œç¨‹åˆ†æ”¯å·²å­˜åœ¨ï¼‰ï¼š

ç”¨å‚æ•° -u æˆ– --set-upstream-to è®¾ç½®ä¸Šæ¸¸

```bash
git branch --set-upstream-to=origin/<è¿œç¨‹åˆ†æ”¯> <æœ¬åœ°åˆ†æ”¯>
```

æ–¹å¼äºŒï¼ˆé€‚ç”¨è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼‰ï¼š

ä¸Šä¼ æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ï¼ŒåŒæ˜¯æŠŠä¸Šä¼ åçš„è¿œç¨‹åˆ†æ”¯è®¾ç½®ä¸ºæœ¬åœ°åˆ†æ”¯çš„ä¸Šæ¸¸åˆ†æ”¯ï¼š

```bash
git push upstream origin HEAD:<è¿œç¨‹åˆ†æ”¯>
```

- å–æ¶ˆåˆ†æ”¯ä¸Šæ¸¸ï¼š

```bash
git branch --unset-upstream
```

#### åœºæ™¯ï¼šæ‹‰å–è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°åˆ†æ”¯

```bash
git remote add newName git@origin		# å»ºç«‹è¿œç¨‹ä»“åº“è”ç³»
git checkout -b newBranch newName/branch          # æ‹‰å–è”ç³»å¹¶åˆ›å»ºæ–°åˆ†æ”¯
```

### 2.4 git merge

```bash
git merge Dev #  Devè¡¨ç¤ºæŸåˆ†æ”¯ï¼Œè¡¨ç¤ºåœ¨å½“å‰åˆ†æ”¯åˆå¹¶Devåˆ†æ”¯

git merge -m  â€œMerge from Devâ€  Dev # -må¯ä»¥åŠ ä¸Šmergeæ—¶è¦æ·»åŠ çš„æè¿°æ€§è¯­å¥ï¼Œå¦‚æœå‡ºç°å†²çªï¼Œé‚£ä¹ˆå…ˆè§£å†³å†²çªï¼Œå†å°†æ–‡ä»¶git addï¼Œgit commitï¼Œä¹‹åå†merge
```

å½“åˆå¹¶åˆ†æ”¯å‡ºç°å†²çªæ—¶ï¼Œå–æ¶ˆåˆå¹¶ï¼Œä¸€åˆ‡å›åˆ°åˆå¹¶å‰çš„çŠ¶æ€

    git merge --abort

### 2.5 git rebase

git rebase å‘½ä»¤åœ¨å¦ä¸€ä¸ªåˆ†æ”¯åŸºç¡€ä¹‹ä¸Šé‡æ–°åº”ç”¨ï¼Œç”¨äºæŠŠä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚

```bash
git rebase [<upstream> [<branch>]]
```

git rebase çš„æœ€å¤§ä¼˜ç‚¹æ˜¯å®ƒå¯ä»¥é‡å†™å†å²,å¯ä»¥å¯¹æŸä¸€æ®µçº¿æ€§æäº¤å†å²è¿›è¡Œç¼–è¾‘ã€åˆ é™¤ã€å¤åˆ¶ã€ç²˜è´´ï¼›å› æ­¤ï¼Œåˆç†ä½¿ç”¨ rebase å‘½ä»¤å¯ä»¥ä½¿æˆ‘ä»¬çš„æäº¤å†å²å¹²å‡€.

#### 2.4.1ã€åˆå¹¶å¤šä¸ª commit ä¸ºä¸€ä¸ªå®Œæ•´ commit

å½“ä½ è¿è¡Œ git rebase -i æ—¶ï¼Œä½ ä¼šè¿›å…¥ä¸€ä¸ªç¼–è¾‘å™¨ä¼šè¯ï¼Œå…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰æ­£åœ¨è¢«å˜åŸºçš„æäº¤ï¼Œä»¥åŠå¯ä»¥å¯¹å…¶æ‰§è¡Œçš„æ“ä½œçš„å¤šä¸ªé€‰é¡¹ã€‚é»˜è®¤çš„é€‰æ‹©æ˜¯é€‰æ‹©ï¼ˆPickï¼‰ã€‚

- Pickï¼šä¼šåœ¨ä½ çš„å†å²è®°å½•ä¸­ä¿ç•™è¯¥æäº¤ã€‚
- Rewordï¼šå…è®¸ä½ ä¿®æ”¹æäº¤ä¿¡æ¯ï¼Œå¯èƒ½æ˜¯ä¿®å¤ä¸€ä¸ªé”™åˆ«å­—æˆ–æ·»åŠ å…¶å®ƒæ³¨é‡Šã€‚
- Editï¼šå…è®¸ä½ åœ¨é‡æ”¾åˆ†æ”¯çš„è¿‡ç¨‹ä¸­å¯¹æäº¤è¿›è¡Œä¿®æ”¹ã€‚
- Squashï¼šå¯ä»¥å°†å¤šä¸ªæäº¤åˆå¹¶ä¸ºä¸€ä¸ªã€‚

æŠŠåŠŸèƒ½ç›¸åŒçš„ commitï¼Œåˆæˆä¸€ä¸ª commitï¼Œreview çš„æ—¶å€™å°±æ•´æ´è®¸å¤šã€‚

```bash
git rebase -i  [startpoint]  [endpoint]
```

#### 2.4.2ã€å°†æŸä¸€æ®µ commit ç²˜è´´åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¸Š

å½“æˆ‘ä»¬é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªåˆ†æ”¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æŸä¸€ä¸ªåˆ†æ”¯ä¸­çš„ä¸€æ®µæäº¤åŒæ—¶åº”ç”¨åˆ°å…¶ä»–åˆ†æ”¯ä¸­

```bash
git rebase   [startpoint]   [endpoint]  --onto  [branchName]
```

#### 2.4.3 åˆå¹¶åˆ†æ”¯

å½“ master ä¸Šæœ‰ä¸€ä¸ªæ–°æäº¤ Mï¼Œfeature ä¸Šæœ‰ä¸¤ä¸ªæ–°æäº¤ C å’Œ Dï¼Œæ­¤æ—¶åˆ‡æ¢åˆ° feature åˆ†æ”¯ä¸Šï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç›¸å½“äºæ˜¯æƒ³è¦æŠŠ master åˆ†æ”¯åˆå¹¶åˆ° feature åˆ†æ”¯ï¼ˆè¿™ä¸€æ­¥çš„åœºæ™¯å°±å¯ä»¥ç±»æ¯”ä¸ºæˆ‘ä»¬åœ¨è‡ªå·±çš„åˆ†æ”¯ feature ä¸Šå¼€å‘äº†ä¸€æ®µæ—¶é—´äº†ï¼Œå‡†å¤‡ä»ä¸»å¹² master ä¸Šæ‹‰ä¸€ä¸‹æœ€æ–°æ”¹åŠ¨ï¼‰

```bash
git checkout feature
git rebase master

# è¿™ä¸¤æ¡å‘½ä»¤ç­‰ä»·äºgit rebase master feature
```

##### git rebase å’Œ git merge çš„åŒºåˆ«

merge æ˜¯åˆå¹¶çš„æ„æ€ï¼Œrebase æ˜¯å¤ä½åŸºåº•çš„æ„æ€ã€‚

merge æ“ä½œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œä¹‹å‰æäº¤åˆ†å¼€æ˜¾ç¤ºã€‚ è€Œ rebase æ“ä½œä¸ä¼šç”Ÿæˆæ–°çš„èŠ‚ç‚¹ï¼Œæ˜¯å°†ä¸¤ä¸ªåˆ†æ”¯èåˆæˆä¸€ä¸ªçº¿æ€§çš„æ“ä½œã€‚

å¾€å…¬å…±åˆ†æ”¯ä¸Šåˆä»£ç çš„æ—¶å€™ï¼Œä½¿ç”¨ mergeã€‚å¦‚æœä½¿ç”¨ rebaseï¼Œé‚£ä¹ˆå…¶ä»–å¼€å‘äººå‘˜æƒ³çœ‹ä¸»åˆ†æ”¯çš„å†å²ï¼Œå°±ä¸æ˜¯åŸæ¥çš„å†å²äº†ï¼Œå†å²å·²ç»è¢«ä½ ç¯¡æ”¹äº†ã€‚ä¸¾ä¸ªä¾‹å­è§£é‡Šä¸‹ï¼Œæ¯”å¦‚å¼ ä¸‰å’Œæå››ä»å…±åŒçš„èŠ‚ç‚¹æ‹‰å‡ºæ¥å¼€å‘ï¼Œå¼ ä¸‰å…ˆå¼€å‘å®Œæäº¤äº†ä¸¤æ¬¡ç„¶å merge ä¸Šå»äº†ï¼Œæå››åæ¥å¼€å‘å®Œå¦‚æœ rebase ä¸Šå»ï¼Œåˆ™æå››çš„æ–°æäº¤å˜æˆäº†å¼ ä¸‰çš„æ–°æäº¤çš„æ–°åŸºåº•ï¼Œæœ¬æ¥æå››çš„æäº¤æ˜¯æœ€æ–°çš„ï¼Œç»“æœæœ€æ–°çš„æäº¤æ˜¾ç¤ºåè€Œæ˜¯å¼ ä¸‰çš„ï¼Œå°±ä¹±å¥—äº†ã€‚

ä½†æ˜¯ï¼Œrebase ç”Ÿæˆçš„åˆå¹¶å†²çªï¼Œè™½ç„¶ç”±æœ€æ–°çš„ commiter æäº¤ï¼Œä½†æ˜¯è¿™æ ·å¯ä»¥ä¿è¯ git çš„ log æ—¥å¿—æŸ¥çœ‹ï¼Œåˆ©äºå›æ»šï¼Œæ¨èä½¿ç”¨ git rebaseã€‚

rebase å’Œ merge åˆ†å…¬å¸è€Œå¼‚ï¼Œä»¥ä¼ä¸šä¸ºå‡†ã€‚

```bash
git rebase dev # åœ¨å½“å‰åˆ†æ”¯åˆå¹¶Devåˆ†æ”¯
```

ä¸ merge çš„å½¢å¼ä¸€æ ·ï¼Œå¦‚æœ git rebase é‡åˆ°å†²çªï¼Œç¬¬ä¸€æ­¥å½“ç„¶æ˜¯è§£å†³å†²çªï¼Œç„¶å git addï¼Œä¹‹åå¹¶ä¸éœ€è¦ git commit,è€Œæ˜¯ç›´æ¥è¿è¡Œ

```bash
git rebase --continue
```

è¿™æ · git å°±ä¼šç»§ç»­åº”ç”¨å‰©ä¸‹çš„è¡¥ä¸äº†.

å‡å¦‚ä½ ä¸æƒ³è§£å†³å†²çªä¸”ä¸å†è¿›è¡Œåˆå¹¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨:

```bash
git rebase --abort
```

## ä¸‰ã€ç‰ˆæœ¬ç®¡ç†

### 3.1 git reset

git reset å‘½ä»¤ç”¨äºå›é€€ç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‡å®šé€€å›æŸä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬ï¼Œå…¶é—´çš„ commit ä¼šè¢«ä¸¢å¼ƒï¼Œå·¥ä½œæ ‘çš„å†…å®¹ä¸Šä¹Ÿä¼šä¸€èµ·åˆ é™¤ã€‚

```bash
git reset [--soft | --mixed | --hard] [HEAD]
```

--soft å‚æ•°ç”¨äºå›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼š

git reset --soft HEAD^ : ç”¨äºæ’¤é”€çš„ commit

--mixed ä¸ºé»˜è®¤ï¼Œå¯ä»¥ä¸ç”¨å¸¦è¯¥å‚æ•°ï¼Œç”¨äºé‡ç½®æš‚å­˜åŒºçš„æ–‡ä»¶ä¸ä¸Šä¸€æ¬¡çš„æäº¤(commit)ä¿æŒä¸€è‡´ï¼Œå·¥ä½œåŒºæ–‡ä»¶å†…å®¹ä¿æŒä¸å˜ã€‚

-hard å‚æ•°æ’¤é”€å·¥ä½œåŒºä¸­æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹å†…å®¹ï¼Œå°†æš‚å­˜åŒºä¸å·¥ä½œåŒºéƒ½å›åˆ°ä¸Šä¸€æ¬¡ç‰ˆæœ¬ï¼Œå¹¶åˆ é™¤ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯æäº¤ï¼š

### 3.1 git revert

git revert å‘½ä»¤ç”¨äºå°†æŸæ¬¡ commit çš„æ›´æ”¹å–æ¶ˆï¼Œå¯ä»¥ç”¨ä½œæŸæ¬¡ commit çš„å›é€€ï¼Œåœ¨å·¥ä½œæ ‘ä¸Šä¼šæœ‰ä¸€æ¬¡é‡æ–°æäº¤çš„è®°å½•ã€‚

```bash
git revert HEAD   # æ’¤é”€å‰ä¸€ä¸ªcommit
git revert HEAD^  # æ’¤é”€å‰å‰ä¸€ä¸ªcommit
git revert <commit_id>  # æ’¤é”€æŸä¸€æ¬¡commit
```

#### git reset å’Œ git revert çš„åŒºåˆ«

æ’¤é”€ï¼ˆrevertï¼‰è¢«è®¾è®¡ä¸ºæ’¤é”€å…¬å¼€çš„æäº¤ï¼ˆæ¯”å¦‚å·²ç» pushï¼‰çš„å®‰å…¨æ–¹å¼ï¼Œgit reset è¢«è®¾è®¡ä¸ºé‡è®¾æœ¬åœ°æ›´æ”¹

ä¸¤è€…ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š

- git revert æ˜¯ç”¨ä¸€æ¬¡æ–°çš„ commit æ¥å›æ»šä¹‹å‰çš„ commitï¼Œgit reset æ˜¯ç›´æ¥åˆ é™¤æŒ‡å®šçš„ commit

- git revert æ˜¯ç”¨ä¸€æ¬¡é€†å‘çš„ commitâ€œä¸­å’Œâ€ä¹‹å‰çš„æäº¤ï¼Œå› æ­¤æ—¥ååˆå¹¶è€çš„ branch æ—¶ï¼Œä¹‹å‰æäº¤åˆå¹¶çš„ä»£ç ä»ç„¶å­˜åœ¨ï¼Œå¯¼è‡´ä¸èƒ½å¤Ÿé‡æ–°åˆå¹¶ä½†æ˜¯ git reset æ˜¯ä¹‹é—´æŠŠæŸäº› commit åœ¨æŸä¸ª branch ä¸Šåˆ é™¤ï¼Œå› è€Œå’Œè€çš„ branch å†æ¬¡ merge æ—¶ï¼Œè¿™äº›è¢«å›æ»šçš„ commit åº”è¯¥è¿˜ä¼šè¢«å¼•å…¥

- æ‰å¦‚æœå›é€€åˆ†æ”¯çš„ä»£ç ä»¥åè¿˜éœ€è¦çš„æƒ…å†µåˆ™ä½¿ç”¨ git revertï¼Œ å¦‚æœåˆ†æ”¯æ˜¯æé”™äº†æ²¡ç”¨çš„å¹¶ä¸”ä¸æƒ³è®©åˆ«äººå‘ç°è¿™äº›é”™è¯¯ä»£ç ï¼Œåˆ™ä½¿ç”¨ git reset

### 3.3 git stash

stashï¼Œè¯‘ä¸ºå­˜æ”¾ï¼Œåœ¨ git ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨è¿›è¡Œä¿å­˜ï¼Œè¿™äº›ä¿®æ”¹ä¼šä¿å­˜åœ¨ä¸€ä¸ªæ ˆä¸Šåç»­ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ä»»ä½•åˆ†æ”¯é‡æ–°å°†æŸæ¬¡çš„ä¿®æ”¹æ¨å‡ºæ¥ï¼Œé‡æ–°åº”ç”¨è¿™äº›æ›´æ”¹çš„ä»£ç 

```bash
git stash   # ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨ä¿å­˜èµ·æ¥
git stash save  # ä¸ git stash ç”¨å¤„ä¸€è‡´ï¼Œä½†å³å°†åºŸé™¤
git stash list  # æŸ¥çœ‹æ¯æ¬¡stashæ“ä½œçš„åˆ—è¡¨
git stash pop [stashname] # ä»æ ˆæ¢å¤åˆ°å·¥ä½œåŒº,é»˜è®¤æ ˆé¡¶
git stash apply [stashname] #å°†å †æ ˆä¸­çš„å†…å®¹åº”ç”¨åˆ°å½“å‰ç›®å½•ï¼Œä¸åŒäºgit stash popï¼Œè¯¥å‘½ä»¤ä¸ä¼šå°†å†…å®¹ä»å †æ ˆä¸­åˆ é™¤
# ä¹Ÿå°±è¯´è¯¥å‘½ä»¤èƒ½å¤Ÿå°†å †æ ˆçš„å†…å®¹å¤šæ¬¡åº”ç”¨åˆ°å·¥ä½œç›®å½•ä¸­ï¼Œé€‚åº”äºå¤šä¸ªåˆ†æ”¯çš„æƒ…å†µ
git stash show [stashname]  #æŸ¥çœ‹å †æ ˆä¸­æœ€æ–°ä¿å­˜çš„stashå’Œå½“å‰ç›®å½•çš„å·®å¼‚
git stash drop [stashname]   # ä»å †æ ˆä¸­ç§»é™¤æŸä¸ªæŒ‡å®šçš„stash
git stash clear # æ¸…é™¤å †æ ˆä¸­çš„æ‰€æœ‰å†…å®¹,ä¸ä¼šå›åˆ°å·¥ä½œåŒº
```

#### åœºæ™¯ï¼šå¼€å‘è¿›è¡Œåˆ°ä¸€åŠ,ä½†æ˜¯ä»£ç è¿˜ä¸æƒ³è¿›è¡Œæäº¤ ,ç„¶åéœ€è¦åŒæ­¥å»å…³è”è¿œç«¯ä»£ç æ—¶ï¼Œå¯èƒ½å‘ç”Ÿå†²çª

è¿™æ—¶å€™å°±å¯ä»¥ä¾æ¬¡ä½¿ç”¨ä¸‹è¿°çš„å‘½ä»¤ï¼š

```bash
git stash
git pull
git stash pop
```

## å››ã€æ ‡ç­¾ç®¡ç†

é€šå¸¸ï¼Œå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œä¼šåœ¨ç‰ˆæœ¬åº“ä¸­æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·ï¼Œå°±å”¯ä¸€ç¡®å®šäº†æ‰“æ ‡ç­¾æ—¶åˆ»çš„ç‰ˆæœ¬ã€‚å°†æ¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œå–æŸä¸ªæ ‡ç­¾çš„ç‰ˆæœ¬ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªæ‰“æ ‡ç­¾çš„æ—¶åˆ»çš„å†å²ç‰ˆæœ¬å–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ã€‚

ç®€å•ç†è§£ï¼šæ ‡ç­¾æ˜¯æŸä¸ªç‰ˆæœ¬çš„åˆ«åï¼Œå› ä¸º Git çš„ç‰ˆæœ¬å·éƒ½æ˜¯ç”¨ä¸€ä¸²å­—æ¯æ•°å­—ç»„æˆï¼Œä¸ºäº†ä¾¿äºç®¡ç†ï¼ŒGit å¯ä»¥ç»™ç‰ˆæœ¬å–ä¸ªåˆ«åï¼ˆä¹Ÿå°±æ˜¯æ‰“ä¸Šæ ‡ç­¾ï¼Œæ¯”å¦‚æ ‡ç­¾çš„åå­—å«åš v1.0.0ï¼‰ã€‚é»˜è®¤æ ‡ç­¾æ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„ commit ä¸Šçš„

```bash
git tag <name>      # æœ€åä¸€æ¬¡commitæ‰“ä¸Šæ ‡ç­¾name
git tag <name> [commitId]  # æŸæ¬¡commitæ‰“ä¸Šæ ‡ç­¾name
git tag -d <tagname>   # åˆ é™¤æ ‡ç­¾tagname
git push [origin] <tagname>  # æ¨é€æ ‡ç­¾è‡³è¿œç¨‹
git push [origin] :refs/tags/<tagname>   # åˆ é™¤è¿œç¨‹æ ‡ç­¾
```

æ­å–œä½  ğŸ‰ ğŸ‰ ğŸ‰ ï¼å­¦åˆ°è¿™å·²ç»å‡ºå¸ˆäº†ï¼

## äº”ã€Jenkinsã€webhook

## å…­ã€git message Emoji

```ts
'use strict';

module.exports = {
  types: [
    { value: 'âœ¨feat', name: 'âœ¨feat:          å¢åŠ æ–°åŠŸèƒ½' },
    { value: 'ğŸ›fix', name: 'ğŸ›fix:           ä¿®å¤bug' },
    { value: 'ğŸ“docs', name: 'ğŸ“docs:          ä¿®æ”¹æ–‡æ¡£' },
    { value: 'ğŸš€perf', name: 'ğŸš€perf:          æ€§èƒ½ä¼˜åŒ–' },
    { value: 'ğŸ“¦build', name: 'ğŸ“¦build:         æ‰“åŒ…' },
    { value: 'ğŸ‘·ci', name: 'ğŸ‘·ci:            CIéƒ¨ç½²' },
    { value: 'ğŸ”‚revert', name: 'ğŸ”‚revert:        ç‰ˆæœ¬å›é€€' },
    { value: 'ğŸ’style', name: 'ğŸ’style:         æ ·å¼ä¿®æ”¹ä¸å½±å“é€»è¾‘' },
    { value: 'ğŸš¨test', name: 'ğŸš¨test:          å¢åˆ æµ‹è¯•' },
  ],
  messages: {
    type: 'è¯·é€‰æ‹©æäº¤çš„ç±»å‹ï¼›',
    subject: 'è¯·ç®€è¦æè¿°æäº¤ï¼ˆå¿…å¡«ï¼‰',
    body: 'è¯·è¾“å…¥è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰',
    footer: 'è¯·é€‰æ‹©è¦å…³é—­çš„issueï¼ˆå¯é€‰ï¼‰ä¾‹å¦‚ï¼š#31, #34',
    confirmCommit: 'ç¡®è®¤è¦ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿï¼ˆy/nï¼‰',
  },
  allowCustomScopes: false,
  skip: ['body', 'footer'],
  subjectLimit: 72,
};
```
